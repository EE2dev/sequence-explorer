d3.sankeySeq=function(){function o(){k.forEach(function(a){a.sourceLinks=[],a.targetLinks=[]}),l.forEach(function(a){var b=a.source,c=a.target;"number"==typeof b&&(b=a.source=k[a.source]),"number"==typeof c&&(c=a.target=k[a.target]),b.sourceLinks.push(a),c.targetLinks.push(a)})}function p(){k.forEach(function(a){a.value=Math.max(d3.sum(a.sourceLinks,t),d3.sum(a.targetLinks,t))})}function q(){i=j?i:d3.max(k,function(a){return a.value}),h=(e[1]/g.length-d)/i,b&&console.log("ky: "+h),k.forEach(function(a,b){a.dy=a.value*h,a.dx=c}),l.forEach(function(a){a.dy=a.value*h})}function r(){b&&console.log(e),m=d3.scalePoint().domain(f).range([0,e[0]-c]),n=d3.scalePoint().domain(g).range([e[1],e[1]/g.length]),k.forEach(function(a){a.x=m(a.nameX),a.y=n(a.nameY)-a.dy,b&&(console.log("x "+a.nameX+" -> "+m(a.nameX)),console.log("y "+a.nameY+" -> "+m(a.nameY)))}),b&&console.log(k)}function s(){function a(a,b){return a.source.y-b.source.y}function b(a,b){return a.target.y-b.target.y}k.forEach(function(c){c.sourceLinks.sort(b),c.targetLinks.sort(a)}),k.forEach(function(a){var b=0,c=0;a.sourceLinks.forEach(function(a){a.sy=b,b+=a.dy}),a.targetLinks.forEach(function(a){a.ty=c,c+=a.dy})})}function t(a){return a.value}var h,i,m,n,a={},b=!1,c=15,d=8,e=[700,500],f=[],g=[],j=!1,k=[],l=[];return a.debugOn=function(c){return arguments.length?(b=c,a):b},a.nodeWidth=function(b){return arguments.length?(c=+b,a):c},a.nodePadding=function(b){return arguments.length?(d=+b,a):d},a.nodes=function(b){return arguments.length?(k=b,a):k},a.links=function(b){return arguments.length?(l=b,a):l},a.sequence=function(b){return arguments.length?(f=b,a):f},a.categories=function(b){return arguments.length?(g=b,a):g},a.size=function(b){return arguments.length?(e=b,a):e},a.xScale=function(b){return arguments.length?(m=b,a):m},a.yScale=function(b){return arguments.length?(n=b,a):n},a.relayout=function(){return s(),a},a.link=function(){function b(b){var c=b.source.x+b.source.dx,d=b.target.x,e=d3.interpolateNumber(c,d),f=e(a),g=e(1-a),h=b.source.y+b.sy+b.dy/2,i=b.target.y+b.ty+b.dy/2;return"M"+c+","+h+"C"+f+","+h+" "+g+","+i+" "+d+","+i}var a=.5;return b.curvature=function(c){return arguments.length?(a=+c,b):a},b},a.layout=function(){return o(),p(),q(),r(),s(),a},a.getNodeHeight=function(a){return a*h},a.maxValue=function(b){return arguments.length?b===-1?void(j=!1):(i=b,j=!0,a):i},a};